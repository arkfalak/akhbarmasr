<!DOCTYPE html>
<html>
<head>
    <title>Pagination Example</title>
    <style>
        .list-item {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .list-item img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div id="pagination-container"></div>

    <script>
        // Fetch the JSON data
        fetch('https://simplenews-bbb17-default-rtdb.europe-west1.firebasedatabase.app/test.json')
            .then(response => response.json())
            .then(data => {
                // Define the number of items per page
                const itemsPerPage = 3;

                // Calculate the total number of pages
                const totalItems = Object.keys(data).length;
                const totalPages = Math.ceil(totalItems / itemsPerPage);

                // Track the current page number
                let currentPage = 1;

                // Render the list for the given page
                function renderList(page) {
                    // Get the container element
                    const container = document.getElementById('pagination-container');
                    container.innerHTML = '';

                    // Calculate the start and end indices for the current page
                    const startIndex = (page - 1) * itemsPerPage;
                    const endIndex = startIndex + itemsPerPage;

                    // Loop through the items and generate the HTML for each item
                    for (let i = startIndex; i < endIndex; i++) {
                        const itemKey = `file${i + 1}`;
                        if (data.hasOwnProperty(itemKey)) {
                            const item = data[itemKey].rss.channel.item[0];

                            // Create the list item element
                            const listItem = document.createElement('div');
                            listItem.classList.add('list-item');

                            // Create the title element
                            const title = document.createElement('h2');
                            title.textContent = item.title._t;
                            listItem.appendChild(title);

                            // Create the image element
                            const image = document.createElement('img');
                            image.src = item.enclusure.url;
                            listItem.appendChild(image);

                            // Create the description element
                            const description = document.createElement('p');
                            description.textContent = item.desc._t;
                            listItem.appendChild(description);

                            // Create the link element
                            const link = document.createElement('a');
                            link.href = item.link._t;
                            link.textContent = 'Read More';
                            listItem.appendChild(link);

                            // Append the list item to the container
                            container.appendChild(listItem);
                        }
                    }
                }

                // Render the initial list
                renderList(currentPage);

                // Function to handle pagination navigation
                function navigatePage(direction) {
                    currentPage += direction;

                    // Ensure the page stays within the valid range
                    if (currentPage < 1) {
                        currentPage = 1;
                    } else if (currentPage > totalPages) {
                        currentPage = totalPages;
                    }

                    // Render the list for the new page
                    renderList(currentPage);
                }

                // Previous button event handler
                document.addEventListener('click', function(event) {
                    if (event.target.id === 'previous-btn') {
                        navigatePage(-1);
                    }
                });

                // Next button event handler
                document.addEventListener('click', function(event) {
                    if (event.target.id === 'next-btn') {
                        navigatePage(1);
                    }
                });

                // Generate previous and next buttons
                const previousBtn = document.createElement('button');
                previousBtn.id = 'previous-btn';
                previousBtn.textContent = 'Previous';

                const nextBtn = document.createElement('button');
                nextBtn.id = 'next-btn';
                nextBtn.textContent = 'Next';

                // Append the buttons to the container
                document.getElementById('pagination-container').appendChild(previousBtn);
                document.getElementById('pagination-container').appendChild(nextBtn);
            })
            .catch(error => console.log(error));
    </script>
</body>
</html>
